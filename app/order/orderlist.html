<!DOCTYPE html>
<!--cwj-->
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../../css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../../css/app.css" />
		<link rel="stylesheet" type="text/css" href="../../css/order/order.css" />
		<link rel="stylesheet" href="../../css/common/common.css" />
		<style>
			html,
			body {
				background-color: #efeff4;
			}
			
			.mui-bar~.mui-content .mui-fullscreen {
				top: 44px;
				height: auto;
			}
			
			.mui-pull-top-tips {
				position: absolute;
				top: -20px;
				left: 50%;
				margin-left: -25px;
				width: 40px;
				height: 40px;
				border-radius: 100%;
				z-index: 1;
			}
			
			.mui-bar~.mui-pull-top-tips {
				top: 24px;
			}
			
			.mui-pull-top-wrapper {
				width: 42px;
				height: 42px;
				display: block;
				text-align: center;
				background-color: #efeff4;
				border: 1px solid #ddd;
				border-radius: 25px;
				background-clip: padding-box;
				box-shadow: 0 4px 10px #bbb;
				overflow: hidden;
			}
			
			.mui-pull-top-tips.mui-transitioning {
				-webkit-transition-duration: 200ms;
				transition-duration: 200ms;
			}
			
			.mui-pull-top-tips .mui-pull-loading {
				/*-webkit-backface-visibility: hidden;
				-webkit-transition-duration: 400ms;
				transition-duration: 400ms;*/
				margin: 0;
			}
			
			.mui-pull-top-wrapper .mui-icon,
			.mui-pull-top-wrapper .mui-spinner {
				margin-top: 7px;
			}
			
			.mui-pull-top-wrapper .mui-icon.mui-reverse {
				/*-webkit-transform: rotate(180deg) translateZ(0);*/
			}
			
			.mui-pull-bottom-tips {
				text-align: center;
				background-color: #efeff4;
				font-size: 15px;
				line-height: 40px;
				color: #777;
			}
			
			.mui-pull-top-canvas {
				overflow: hidden;
				background-color: #fafafa;
				border-radius: 40px;
				box-shadow: 0 4px 10px #bbb;
				width: 40px;
				height: 40px;
				margin: 0 auto;
			}
			
			.mui-pull-top-canvas canvas {
				width: 40px;
			}
			
			.mui-slider-indicator.mui-segmented-control {
				background-color: #efeff4;
			}
			
			.mui-segmented-control .mui-control-item {
				color: #CCECE1 !important;
			}
			
			.mui-segmented-control.mui-segmented-control-inverted .mui-control-item.mui-active {
				border-bottom: 1px solid #fff !important;
				color: #fff !important;
			}
			
			.mui-bar-nav~.mui-content .mui-slider.mui-fullscreen {}
			
			.mui-slider-indicator.mui-segmented-control {
				background: #3DB391;
				color: #CCECE1
			}
			.orderlist-content-box .footer-order-icon{
			background: url(../../images/message/nav_order_green.png) no-repeat center;
			background-size: 100%;
			}
			.orderlist-content-box .footer-order-text{
				color: #31BA90;
			}
			.quick-sale-pay {
				position: fixed;
				bottom: 30px;
				right: 10px;
				z-index: 9999;
				width: 50px;
				height: 50px;
			}
		</style>
		<script src="../../js/framework/common.js"></script>
	</head>
	<body>
		<div class="mui-off-canvas-wrap mui-draggable orderlist-content-box" id="app">
		<div class="mui-off-canvas-wrap mui-draggable" id="app">
			<img src="../../images/order/quick_icon.png" v-if="currentRoleId == 9" class="quick-sale-pay">
			<!--侧滑菜单部分-->
			<aside id="offCanvasSide" class="mui-off-canvas-left">
				<div id="offCanvasSideScroll" class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<div class="offCanvasSide-header">
							<img src="../../css/images/logo_login.png" alt="" class="offCanvasSide-header-avatar">
							<p class="offCanvasSide-header-name">{{username}}</p>
						</div>

						<form class="offCanvasSide-role-wrap mui-input-group">
							<div class="mui-input-row mui-radio mui-left" v-for="item in rolePositionList">
								<label>{{item.name}}</label>
								<input type="radio" v-bind:value="item.id" v-model="rolePositionId">
							</div>
						</form>

						<div class="offCanvasSide-logout">
							<button type="button" id="logout" class="mui-btn mui-btn-block">退出登录</button>
						</div>
					</div>
				</div>
			</aside>

			<div class="mui-inner-wrap" style="background:#efeff4">
				<header class="mui-bar mui-bar-nav" style="background:#3db391;">
					<a href="#offCanvasSide" style="color:#fff" class="mui-icon mui-action-menu mui-icon-bars mui-pull-left"></a>
					<h1 class="mui-title" style="color: #fff;">订单管理</h1>
					<a style="color:#fff" id="search-order" class="mui-icon mui-action-menu mui-icon-search mui-pull-right"></a>
				</header>
				<div class="mui-content orderlist-content">
					<!--<div id="searchDiv" class="mui-input-row search">
						<input class="searchspan" type="text" placeholder="订单编号/导游姓名/团号" />
						<span id="searchBtn" class="searchicon">搜索</span>
					</div>-->
					<div id="slider" class="mui-slider mui-fullscreen">
						<div id="sliderSegmentedControl" class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
							<a class="mui-control-item" :class="{'mui-active':index == 0}" :href="'#item'+index+'mobile'" v-for="(data,index) in orderHeader">
								<span v-text="data.name"></span>
								<span v-text='data.number'></span>
							</a>

						</div>
						<div class="mui-slider-group">
							<div :id="'item'+index+'mobile'" class="mui-slider-item mui-control-content" :class="{'mui-active':index == 0}" v-for="(data,index) in orderList">
								<div id="scroll1" class="mui-scroll-wrapper">
									<div class="mui-scroll">
										<ul class="order-ul">
											<li class="order-li" v-for="item in data">
												<div class="mui-table title">
													<div class="mui-clearfix" style="margin-bottom: 0.2rem;">
														<span class="colorgray">
														团号:<i v-text="item.tourNo"></i>
														</span>
														<span class="dqr colororange" v-if="item.actionStatus ==0">待计调</span>
														<span class="dqr colorgreen" v-if="item.actionStatus ==11">待分配</span>
														<span class="dqr colorblue" v-if="item.actionStatus ==22">待输出</span>
														<span class="dqr colorpink" v-if="item.actionStatus ==33">待销售</span>
														<span class="dqr coloryellow" v-if="item.actionStatus ==44">待完成</span>
														<span class="dqr colorgreen" v-if="item.actionStatus ==55">已完成</span>
													</div>
													<div class="item">
														{{item.productName}}
													</div>

												</div>

												<div class="nr">
													<div class="imgbody">
														<div class="tourinfo" :data-id="item.id" :data-summary="item.summary" :data-actionStatus="item.actionStatus">
															<div class="item">
																<span class="ico ico-starttime"></span>
																<span>出团日期: {{item.startTime}}</span>
																<span>共{{item.groupDays}}天</span>
															</div>
															<div class="item">
																<span class="ico ico-linename"></span> 线路名称: {{item.lineName}}
															</div>
															<div class="item">
																<span class="ico ico-personcount"></span> 团队人数: {{item.personCount}}
															</div>
														</div>
														<div class="item guideinfo">
															<span class="ico ico-tourguide"></span>
															导游: {{item.tourGuide}}
															<a v-for="tp in item.tourGuidePhone" :href="'tel:'+tp" style=" color: #FF8458; margin-left: 0.1rem;"> <span v-text="tp"></span> </a>

														</div>
													</div>
												</div>
												<div class="button">
													<!--
													assignOrder 计调、指派
													allotPhotoOrder 分配
													outOrder 填写输出信息
													saleOutOrder 销售输出
													genSale 生成销售
													summary 录入心得
													计调主管 4 可指派
													执行人 2 可计调
													摄影主管 5 可分配
													摄影师 3 可录入心得
													输出 8 可填写输出信息
													销售  9 可生成销售
														-->
														<!--订单状态为已取消，全部按钮都不显示-->
													<div v-if="item.status!=3">
														<!-- <div v-if="currentRoleId == 4">
															<button v-if="assignOrder&&item.actionStatus!=4" type="button" class="mui-btn assignOrder" :data-id="item.id" :data-no="item.orderNo">
																指派
														</button> 
														</div>-->
														<div v-if="currentRoleId == 4">
															<button v-if="item.actionStatus!=44&&item.actionStatus!=33" type="button" class="mui-btn jidiao" :data-id="item.id" :data-no="item.orderNo">
																计调
															</button>

															<button v-if="item.actionStatus==33 || item.actionStatus==44" type="button" class="mui-btn tourinfo" :data-id="item.id" :data-no="item.orderNo">
																修改信息
															</button>

															<button v-if="item.actionStatus==44" type="button" class="mui-btn" :data-id="item.id" :data-no="item.orderNo" id="confirmComplete">
																确认完成
															</button>
														</div>
														<div v-if="currentRoleId == 2">
															<button v-if="item.actionStatus!=44" type="button" class="mui-btn jidiao" :data-id="item.id" :data-no="item.orderNo">
																计调
															</button>
														</div>
														<div v-if="currentRoleId == 5">
															<button v-if="item.actionStatus==11||item.actionStatus==22" type="button" class="mui-btn allotPhotoOrder" :data-id="item.id" :data-no="item.orderNo">
																	分配
															</button>

															<button v-if="item.actionStatus==33" type="button" class="mui-btn tourinfo" :data-id="item.id" :data-no="item.orderNo">
																修改信息
															</button>
														</div>
														<div v-if="currentRoleId == 3">
															<button v-if="item.actionStatus!=0&&item.actionStatus!=11" type="button" class="mui-btn summary" :data-summary="item.summary" :data-id="item.id" :data-no="item.orderNo" :data-tourId="item.tourId">
																录入心得
														</button>
														</div>
														<div v-if="currentRoleId == 8">
															<button v-if="item.actionStatus==22||item.actionStatus==33" type="button" class="mui-btn outOrder" :data-id="item.id" :data-no="item.orderNo">
																输出
														</button>
														</div>
														<div v-if="currentRoleId == 9">
															<button v-if="item.actionStatus==33" type="button" class="mui-btn genSale" :data-id="item.id" :data-no="item.orderNo" :data-areaCode="item.areaCode" :data-tourGuide="item.tourGuide" :data-purchaser="item.purchaser" :data-aliasName="item.aliasName">
																生成销售
														</button>
														</div>

													</div>
												</div>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
	
				<div class="mui-off-canvas-backdrop"></div>
				<div class="footer">
					<div class="footer-order-btn">
						<span class="footer-order-icon foot-icon"></span>
						<span class="footer-order-text">订单</span>
					</div>
					<div class="footer-message-btn">
						<span class="footer-message-icon foot-icon"></span>
						<span class="footer-message-text">消息</span>
					</div>
					<div class="footer-personage-btn">
						<span class="footer-personage-icon foot-icon"></span>
						<span class="footer-personage-text">个人</span>
					</div>
				</div>
		</div>

		<script src="../../js/mui.min.js"></script>
		<script src="../../js/mui.pullToRefresh.js"></script>
		<script src="../../js/mui.pullToRefresh.material.js"></script>
		<script src="../../js/framework/define.js"></script>
		<script src="../../js/framework/styles.js"></script>
		<script src="../../js/framework/lf.js"></script>
		<script src="../../libs/vue.min.js"></script>
		<script src="orderlist.js"></script>
	</body>

</html>