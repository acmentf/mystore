<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../../assets/css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../../assets/css/operator/operator.css" />
		<link rel="stylesheet" type="text/css" href="../../assets/css/mui.picker.min.css" />
		<link rel="stylesheet" type="text/css" href="../../assets/css/mui.poppicker.css" />
		<link rel="stylesheet" type="text/css" href="../../assets/css/app.css" />

		<style>
			html,
			body {
				background-color: #efeff4;
				font-size: 15px;
				color: #8B8B8B;
			}

			.mui-bar~.mui-content .mui-fullscreen {
				top: 44px;
				height: auto;
				position: static;
			}

			.mui-pull-top-tips {
				position: absolute;
				top: -20px;
				left: 50%;
				margin-left: -25px;
				width: 40px;
				height: 40px;
				border-radius: 100%;
				z-index: 1;
			}

			.mui-bar~.mui-pull-top-tips {
				top: 24px;
			}

			.mui-pull-top-wrapper {
				width: 42px;
				height: 42px;
				display: block;
				text-align: center;
				background-color: #efeff4;
				border: 1px solid #ddd;
				border-radius: 25px;
				background-clip: padding-box;
				box-shadow: 0 4px 10px #bbb;
				overflow: hidden;
			}

			.mui-pull-top-wrapper .mui-icon,
			.mui-pull-top-wrapper .mui-spinner {
				margin-top: 7px;
			}

			.mui-slider-indicator.mui-segmented-control {
				background-color: #efeff4;
			}

			.mui-segmented-control .mui-control-item {
				color: #A4A4A4 !important;
			}

			.mui-segmented-control .mui-control-item.mui-active {
				border-bottom: 2px solid #3DB391 !important;
				color: #3DB391 !important;
				background-color: #fff;
			}

			.mui-segmented-control {
				border: none;
				background-color: #fff;
			}

			.mui-segmented-control .mui-control-item {
				border-left: none;
			}

			.mui-slider-indicator.mui-segmented-control {
				background: #FFFFFF;
			}

			.assign-staff-wrapper {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				bottom: 0;
				right: 0;
				z-index: 99999;
				width: 100%;
				height: 100%;
				border: none;
			}
		</style>
	</head>

	<body>
		<iframe src="../designate/assign-staff.html" name="iframeStaff" id="iframeStaff" class="assign-staff-wrapper"></iframe>

		<div id="app">
			<!-- 选择景点弹窗 -->
			<div class="select-journey-wrapper">
				<header class="mui-bar mui-bar-nav">
					<h1 class="mui-title">{{$t('select_journey')}}</h1>
					<a @click='confirmSelectJourney' class="mui-btn mui-pull-right confirm-btn">{{$t('ok')}}</a>
				</header>
				<div class="journey-select-inner">
					<ul class="mui-table-view">
						<template v-for="(item,index) in journeyList">
							<li
								class="mui-table-view-cell mui-indexed-list-item"
								:data-value="item.value">
								<div class="item-wrap">
									<span class="text-name" v-text="item.text"></span>
									<div class="btn-wrap">
										<template>
											<button v-if="!item.selected" :index="index" type="button" class="mui-btn btn-select btn-select" @click='selectSingleJourney(item.text,index)'>{{$t('select')}}</button>
											<button v-else :index="index" type="button" class="mui-btn btn-cancel" @click='cancelSingleJourney(item.text, index)'>{{$t('cancel')}}</button>
										</template>
									</div>
								</div>
							</li>
						</template>
					</ul>
				</div>
			</div>
			<!-- 选择景点弹窗 -->

			<header class="mui-bar mui-bar-nav">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
				<h1 class="mui-title">{{$t('operating_information')}}</h1>
				<a class="titleOperat edit" v-show="forStatus == 'check'">{{$t('modify')}}</a>
				<a class="titleOperat save" v-show="forStatus=='edit'">{{$t('save')}}</a>
			</header>
			<div  class="mui-content ">
				<div id="slider" class="mui-slider mui-fullscreen">
					<div>
						<div id="segmentedControl"  class="mui-segmented-control">
							<a class="mui-control-item" :class="{'mui-active':index == forindex}" :href="'#item'+index" v-for="(data,index) in operatorHeader" v-text="data"></a>
						</div>
					</div>
					<div>
						<div id="item0" :class="{'mui-active':forindex == 0}"  class="mui-control-content">
							<ul id="list" class="mui-table-view mui-table-view-chevron">
								<li class="mui-table-view-cell">
									<span>{{$t('district')}}</span>
									<span class="show-on-right">
										<input type="text" v-model="groupInfo.areaName" class="forinput mui-pull-right" readonly="readonly" />
									</span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('group_name')}}</span>
									<span class="show-on-right">
										<input type="text" v-model="groupInfo.lineName" class="forinput mui-pull-right" readonly="readonly" />
									</span>
								</li>
								<li class="mui-table-view-cell ">
									<span>{{$t('group_character')}}</span>
									<span class="show-on-right ">
										<input type="text" v-if="forStatus == 'check'" v-model="groupInfo.groupType" readonly="readonly" class="forinput mui-pull-right" :placeholder="$t('select_group_character')" />
										<input type="text" v-if="forStatus == 'edit'" id='showUserPicker' v-model="groupInfo.groupType" readonly="readonly" class="forinput mui-pull-right"  :placeholder="$t('select_group_character')" />
									</span>
									<span class="mui-icon mui-icon-arrowright"></span>
								</li>
								<li class="mui-table-view-cell ">
									<span>{{$t('presell_character')}}</span>
									<span class="show-on-right ">
										<input type="text" v-if="forStatus == 'check'  || exceptCompletedIsTimeover" v-model="groupInfo.preProps" readonly="readonly" class="forinput mui-pull-right" :placeholder="$t('select_presell_character')" />
										<input type="text" v-if="forStatus == 'edit'" id='showPropsPicker' v-model="groupInfo.preProps"  :readonly="exceptCompletedIsTimeover" class="forinput mui-pull-right"  :placeholder="$t('select_presell_character')" />
									</span>
									<span class="mui-icon mui-icon-arrowright"></span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('presell_unit_price')}}</span>
									<span class="show-on-right">
										<input type="number" v-if="forStatus == 'check' || exceptCompletedIsTimeover" readonly="readonly" v-model="groupInfo.prePrice"  class="forinput mui-pull-right" :placeholder="$t('input_presell_unit_price')" />
										<input type="number" v-else v-model="groupInfo.prePrice"  class="forinput mui-pull-right" :placeholder="$t('input_presell_unit_price')" :readonly="exceptCompletedIsTimeover"/>
									</span>
								</li>
								<li class="mui-table-view-cell ">
									<span>{{$t('shoot_type')}}</span>
									<span class="show-on-right ">
										<input type="text" v-if="forStatus == 'check'" v-model="groupInfo.shootType" readonly="readonly" class="forinput mui-pull-right" :placeholder="$t('select_shoot_type')" />
										<input type="text" v-if="forStatus == 'edit'" id='selectShootType' v-model="groupInfo.shootType" readonly="readonly" class="forinput mui-pull-right"  :placeholder="$t('select_shoot_type')" />
									</span>
									<span class="mui-icon mui-icon-arrowright"></span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('participates_number')}}</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'" readonly="readonly" v-model="groupInfo.personCount"  class="forinput mui-pull-right" :placeholder="$t('input_participates_number')" />
										<input type="text" v-else v-model="groupInfo.personCount"  class="forinput mui-pull-right" :placeholder="$t('input_participates_number')" />
									</span>
								</li>
								<li class="mui-table-view-cell">
									<span>
										{{$t('tour_guide')}}
									</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'" readonly="readonly" v-model="groupInfo.tourGuide"  class="forinput mui-pull-right" :placeholder="$t('input_tour_guide_name')" />
										<input type="text" v-else v-model="groupInfo.tourGuide"  class="forinput mui-pull-right" :placeholder="$t('input_tour_guide_name')" />
									</span>
								</li>
								<li class="mui-table-view-cell">
									<span>
										{{$t('tour_guide_phone')}}
									</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'" readonly="readonly" v-model="groupInfo.tourGuidePhone" class="forinput mui-pull-right" :placeholder="$t('input_tour_guide_phone')" />
										<input type="text" v-else v-model="groupInfo.tourGuidePhone"  class="forinput mui-pull-right" :placeholder="$t('input_tour_guide_phone')" />
									</span>
								</li>
							</ul>
						</div>
						<div id="item1" :class="{'mui-active':forindex == 1}" class="mui-control-content">
							<ul id="list" class="mui-table-view mui-table-view-chevron">
								<li class="mui-table-view-cell">
									<span>{{$t('launch_date')}}</span>
									<span class="show-on-right ">
										<!--<input type="text" readonly="readonly" v-if="forStatus == 'check'" v-model="marchInfo.startTime"  class="forinput mui-pull-right"   />-->
										<input type="text" readonly="readonly" id='chutuan' data-options='{"type":"date"}' v-model="marchInfo.startTime"  class="forinput mui-pull-right" :placeholder="$t('select_launch_date')" />
									</span>
									<span class="mui-icon mui-icon-arrowright"></span>

								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('journey_days')}}</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'" v-model="marchInfo.groupDays" class="forinput mui-pull-right" readonly="readonly" :placeholder="$t('input_journey_days')"/>
										<input type="text" v-else v-model="marchInfo.groupDays" class="forinput mui-pull-right"  :placeholder="$t('input_journey_days')"/>
									</span>
								</li>
								<li class="mui-table-view-cell ">
										<span style="width: 40%"  class="dayFl">{{$t('anticipated_service_completion_time')}}</span>
										<span class="show-on-right dayFl">
											<!--<input v-model="marchInfo.fetchPhotoTime" v-if="forStatus == 'check'" readonly="readonly" type="text"  v-model="getPhotoDate.text"  class="forinput mui-pull-right"  />-->
											<input :disabled="serveInputDisable" v-model="marchInfo.fetchPhotoTime" readonly="readonly" type="text" id='qupian' data-options='{"type":"date"}' v-model="getPhotoDate.text"  class="forinput mui-pull-right" :placeholder="$t('select_time')"/>
										</span>
										<span class="mui-icon mui-icon-arrowright dayFl r10"></span>
	
										<!-- 新增修改按钮 -->
										<button @click="amend" class="btnDv" :disabled="!overTime" :class="{grayBtn:!overTime}">{{$t('modify')}}</button>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('selling_address')}}</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'" v-model="marchInfo.fetchPhotoScene" readonly="readonly" class="forinput mui-pull-right" :placeholder="$t('input_selling_address')" />
										<input type="text" v-else v-model="marchInfo.fetchPhotoScene"  class="forinput mui-pull-right" :placeholder="$t('input_selling_address')" />
									</span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('number_reservation')}}</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'"  v-model="marchInfo.preReservedSeats" readonly="readonly" :placeholder="$t('input_number')" class="forinput mui-pull-right"/>
										<input type="text" v-else v-model="marchInfo.preReservedSeats"  class="forinput mui-pull-right" :placeholder="$t('input_number')" />
									</span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('license_plate_number')}}</span>
									<span class="show-on-right">
										<input type="text" v-if="forStatus == 'check'" v-model="marchInfo.busCardNo" readonly="readonly" :placeholder="$t('input_car_number')"  class="forinput mui-pull-right" />
										<input type="text" v-else v-model="marchInfo.busCardNo"  class="forinput mui-pull-right" :placeholder="$t('input_car_number')" />
									</span>
								</li>
							</ul>
							<div class="mui-input-group">
								<div class="mui-input-row remark">
									<p class="remarkTitle">{{$t('journey_detail')}}</p>
									<textarea v-if="forStatus == 'check'"  v-model="marchInfo.groupRoute" readonly="readonly" :placeholder="$t('input_journey_detail')" class="remark-text" rows="4" ></textarea>
									<textarea v-else  v-model="marchInfo.groupRoute" class="remark-text" rows="4" :placeholder="$t('input_journey_detail')"></textarea>
								</div>
							</div>
							<div class="mui-input-group">
								<div class="mui-input-row remark">
									<p class="remarkTitle">{{$t('remarks')}}</p>
									<textarea v-if="forStatus == 'check'" readonly="readonly"  v-model="marchInfo.exeRemark" :placeholder="$t('input_remarks')" class="remark-text" rows="4" ></textarea>
									<textarea v-else v-model="marchInfo.exeRemark" class="remark-text" rows="4" :placeholder="$t('input_remarks')"></textarea>
								</div>
							</div>
						</div>
						<div id="item2" :class="{'mui-active':forindex == 2}"  class="mui-control-content" >
							<ul v-for="(item,index) in shootInfos" class="mui-table-view mui-table-view-chevron shoot-table">
								<li class="mui-table-view-cell superscript">
									<div class="superscript-img">
										<img src="../../assets/images/order/corner.png" alt="" />
									</div>
									<span v-text="index+1" class="superscript-num" ></span>
									<div class="superscript-xx" :data-index="index">
										<img src="../../assets/images/order/operator_delete.png" alt="" />
									</div>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('shooting_state')}}</span>
									<span class="show-on-right">
										<span class="mui-pull-right" v-text='item.shootState'></span>
									</span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('shoot_location')}}</span>
									<span class="show-on-right" @click="selectJourneyName($event,index,item.journeyName)">
										<!-- <input type="text" v-if="forStatus == 'check'" readonly="readonly"  v-model='item.journeyName' placeholder="请选择景点" class="journeyName forinput mui-pull-right" /> -->
										<input type="text" disabled="disabled" readonly="readonly" v-model='item.journeyName' class="journeyName forinput mui-pull-right" :placeholder="$t('select_shoot_location')"/>
									</span>
									<span v-if="forStatus != 'check'" class="mui-icon mui-icon-arrowright"></span>
								</li>
								<li class="mui-table-view-cell">
									<span>{{$t('shoot_date')}}</span>
									<span class="show-on-right ">
										<!--<input v-if="forStatus == 'check'" readonly="readonly" type="text" v-model="item.shootTime"  class="forinput mui-pull-right"/>-->
										<input readonly="readonly" type="text" :data-index="index"  data-options='{"type":"date"}' v-model="item.shootTime"  class="forinput mui-pull-right psrq" :placeholder="$t('select_shoot_date')" />
									</span>
									<span class="mui-icon mui-icon-arrowright"></span>
								</li>
								<li class="mui-table-view-cell ">
									<span>{{$t('shoot_time_period')}}</span>
									<span class="show-on-right ">
										<input readonly="readonly" type="text" v-if='item.periodType == 0' :data-index="index" v-model='timeName0' class="forinput mui-pull-right pssd">
										<input readonly="readonly" type="text" v-if='item.periodType == 1' :data-index="index" v-model='timeName1' class="forinput mui-pull-right pssd">
										<input readonly="readonly" type="text" v-if='item.periodType == 2' :data-index="index" v-model='timeName2' class="forinput mui-pull-right pssd">
										<input readonly="readonly" type="text" v-if='item.periodType == 3' :data-index="index" v-model='timeName3' class="forinput mui-pull-right pssd">
										<input readonly="readonly"  type="text" v-else data-options='{"type":"date"}' v-model="item.periodType" :data-index="index" class="forinput mui-pull-right pssd"  :placeholder="$t('select_shoot_time_period')" />
									</span>
									<span class="mui-icon mui-icon-arrowright"></span>
								</li>
								<li class="mui-table-view-cell ">
									<span>{{$t('time_remarks')}}</span>
									<span class="show-on-right">
										<span v-if="forStatus == 'check' || item.isConfirmShot == 1" v-text='item.remark' class="mui-pull-right"></span>
										<input v-else type="text" :data-index="index"  v-model="item.remark"  class="forinput mui-pull-right" :placeholder="$t('input_remarks')" />
									</span>
								</li>
								<li class="mui-table-view-cell ">
									<span>{{$t('role.photographer')}}</span>
									<span class="show-on-right ">
										<input  readonly="readonly" :data-index="index" type="text" v-model="item.photographerNames" class="forinput mui-pull-right fpsys" :placeholder="$t('action_btns.assign_photographer')" />
									</span>
									<span v-if="currentRoleId==5" class="mui-icon mui-icon-arrowright"></span>
								</li>
							</ul>
							<button type="button" v-if="forStatus == 'edit'" class="mui-btn mui-btn-block addshootinfo" >+{{$t('add_shoot')}}</button>
						</div>
					</div>
				</div>
			</div>
			  <!--修改表单-->
			  <div  v-show="isAmend" class="amendBox" v-cloak>
				    <div class="amendInfo">
				 	    <h4>{{$t('modify_service_time')}}</h4>
				 	    <p class="overtime">{{$t('timeout_tips')}}</p>
				 	    <div class="actualAmend">
						 	    <div class="mui-input-row mui-input-group  group-info shoot-number">
						 	    	<p>{{$t('anticipated_service_completion_time')}}</p>		
							        <label>{{$t('before_modification')}}</label>
						            <input type="text" v-model="marchInfo.fetchPhotoTime" readonly="readonly" style="font-size: 0.26rem;text-indent: 1em"/>
						    	</div>
								<div class="mui-input-row mui-input-group  group-info shoot-number">
							        <label>{{$t('after_modification')}}</label>								
									<input type="text"  v-model="amendTime" class="select-amend" :placeholder="$t('please_input')+$t('service_time')" id='changeAmend' data-options='{"type":"date"}'  v-model="getPhotoDate.text"/>
						    	</div>
						    	<div class="shoot-number mui-input-group">
									<div class="mui-input-row group-info">
										<label>{{$t('modify_reason')}}</label>
									</div>
									<div class="mui-input-row group-info remark-box reasonS">
										<textarea v-model="amendReserverReasons" class="remark-text" :placeholder="$t('please_input')+$t('modify_reason')" style="font-size: 0.26rem"></textarea>
									</div>
								</div>
						</div>
						<div class="amendBtn">
								<button type="button" class="mui-btn btn1" @click="cancelAmend">
									{{$t('cancel')}}
								</button>
								<div class="mui-btn mui-btn-primary btn2" @click="confirmAmend">
									{{$t('ok')}}
								</div>
						</div>
					</div>
				 </div>	
		</div>
		<script src="../../assets/js/mui.min.js"></script>
		<script src="../../assets/js/mui.pullToRefresh.js"></script>
		<script src="../../assets/js/mui.pullToRefresh.material.js"></script>
		<script src="../../assets/js/mui.picker.min.js"></script>
		<script src="../../assets/js/framework/define.js"></script>
		<script src="../../assets/js/framework/styles.js"></script>
		<script src="../../assets/js/framework/lf.js"></script>
		<script src="../../assets/js/framework/common.js"></script>
		<script src="../../assets/libs/vue.min.js"></script>
		<script src="../../assets/libs/vue-i18n.js"></script>
		<script src="../../assets/i18n/language.js"></script>
	</body>

</html>